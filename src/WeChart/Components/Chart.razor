@namespace WeChart
@inherits ChartBase


@using System.Text.Json
<CascadingValue Value="this">
    <div class="we_chart_container" @attributes="UnknownParameters"    >
        <div>
            <canvas id="@Id" @ref="Me" >
            </canvas>
        </div>
    </div>
    @ChildContent
</CascadingValue>
@code {

    protected override async Task OnAfterRenderAsync(bool firstRender)
    {
        await base.OnAfterRenderAsync(firstRender);
        if (firstRender)
        {
            await Registry.Create(Id,this);
        }
        await Registry.Update(Id, Labels);
    }
    protected override void OnParametersSet()
    {
    }
    protected override void OnInitialized()
    {
        base.OnInitialized();
        if (!string.IsNullOrEmpty(Id))
        {
            Registry.Add(Id);
        }
    }

}
